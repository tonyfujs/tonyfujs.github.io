---
layout: post
title: "10 minutes intro to webscraping with R: Part 1"
---

Learning new stuff is great, but it can sometimes feel a little bit overwhelming...

![](/images/webscraping_1/hydrant_2.jpg)

My learning experience is great if I can:
1. Get a quick and intuitive overview of the topic    
2. Dig deeper as needed (and only as needed)  
3. Apply some of that knowledge right away    

This why I loved Hilary Parker's post on R packages: I gives you the gist of waht an R package is and can do for you, allows you to build your first package in 10 minutes, and gives you references to learn more if you want to.

I will try to respect these principles in this post about webscrapping with R. [INSERT SHORT DESCRIPTION OF WEBSCRAPING]

What I want want to achieve is very simple. I want to download the DC Metro Status information on my computer, and save it in a user friendly format (aka a table) that I will be able to access later. Those are the steps I'm going to follow:

1. Get data from the DC Metro webpage (www.wmata.com)
2. Extract the information we need
3. Turn to tabular format
4. Save on computer

## STEP 1: Get data from DC Metro webpage
Service status information are displayed on the site homepage: www.wmata.com
The following R code read and parse the html code from the wmata homepage

```{r}
library(rvest)
url <- 'http://www.wmata.com/'
wmata <- html(url)
```

## STEP 2: Extract the information we need
I just want 2 pieces of information:
* Name of the metro line
* Status of the metro line

In order to extract specific pieces of information from a webpage, you need to know x things:
1. Similar pieces of information have the identifier.
2. This identifier is called a css selector
3. You can easily find out css selectors using a very handy tool called [selectorGadget](http://selectorgadget.com/)

`rvest` makes really easy to extract specific pieces of information from our `wmata` object.


```{r}
## Extract lines names
lines <- html_nodes(wmata, "#homepage-box-inner td:nth-child(2)")
# Remove html tags & keep only text information
lines <- html_text(lines)
lines
```

```{r}
## Extract service status information
status <-  html_nodes(wmata, ".dropt_rail a")
status <- html_text(status)
status
```

## STEP 3: Turn to tabular format

```{r}
output <- cbind(lines, status)
output <- as.data.frame(output)
```

## STEP 4: Save on my computer
```{r}
write.table(output,  
            file = 'metro_status.csv', 
            sep = ',', 
            row.names = FALSE)
```



